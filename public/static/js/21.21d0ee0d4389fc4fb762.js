webpackJsonp([21],{145:function(e,t,a){a(805);var n=a(10)(a(699),a(859),null,null);e.exports=n.exports},295:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(5),o=a(4);t.default={props:{url:String,name:{type:String,default:"image"},onSuccess:Function,onRemove:Function,fileNum:{type:Number,default:9}},data:function(){return{dialogImageUrl:"",dialogVisible:!1,showUploadBtn:!0,headers:void 0,host:o.a.apiHost,uploadBtn:null,multiple:!0,imgList:[]}},watch:{imgList:function(e){e.length>=this.fileNum&&e[0].url?this.uploadBtn.style.display="none":this.uploadBtn.style.display="inline-block"}},created:function(){this.headers={Authorization:"Bearer "+n.a.getAuthToken(),TwoStep:"Bearer "+n.a.getTwiceToken()}},activated:function(){this.uploadBtn&&(this.uploadBtn=this.$refs.container.querySelector(".el-upload--picture-card"))},mounted:function(){this.uploadBtn=this.$refs.container.querySelector(".el-upload--picture-card")},methods:{handlePreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleRemove:function(e,t){this.onRemove&&this.onRemove(e,t),this.imgList=t},handleSuccess:function(e,t,a){0==e.code?(this.onSuccess&&this.onSuccess(e),this.imgList=a):xmview.showTip("error",e.message)},clearFiles:function(){this.imgList=[]}}}},299:function(e,t,a){t=e.exports=a(139)(!0),t.push([e.i,".component-upload-uploadimages{height:auto!important}.component-upload-uploadimages .el-upload--picture-card,.component-upload-uploadimages .el-upload-list__item{width:100px;height:100px}.component-upload-uploadimages .el-upload--picture-card{line-height:100px}","",{version:3,sources:["/home/zhaoyicheng/devspace/gov_ui/assets/src/views/component/upload/UploadImages.vue"],names:[],mappings:"AACA,+BAA+B,qBAAsB,CACpD,AACD,6GAA6G,YAAY,YAAY,CACpI,AACD,wDAAwD,iBAAiB,CACxE",file:"UploadImages.vue",sourcesContent:["\n.component-upload-uploadimages{height:auto !important\n}\n.component-upload-uploadimages .el-upload-list__item,.component-upload-uploadimages .el-upload--picture-card{width:100px;height:100px\n}\n.component-upload-uploadimages .el-upload--picture-card{line-height:100px\n}\n"],sourceRoot:""}])},354:function(e,t,a){var n=a(299);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(140)("0e24c647",n,!0)},357:function(e,t,a){a(354);var n=a(10)(a(295),a(359),null,null);e.exports=n.exports},359:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"container",staticClass:"component-upload-uploadimages"},[a("el-upload",{attrs:{headers:e.headers,action:e.url,name:e.name,"list-type":"picture-card",multiple:e.multiple,"on-success":e.handleSuccess,"on-error":e.handleRemove,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.imgList,limit:2,accept:"image/jpg,image/jpeg,image/png,image/gif"}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]}},385:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=a(23),i=a(4),r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),c=i.a.apiHost+"/gov/announce",l=function(){function t(){n(this,t)}return r(t,[{key:"getAnnounceListsData",value:function(e){var t=e.name,a=void 0===t?"":t,n=e.page,i=void 0===n?1:n,r=e.pagesize,l=void 0===r?10:r,s=c+"/lists";return o.b(s,{name:a,page:i,pagesize:l},!1).then(function(e){return e.data})}},{key:"fetchAllCheckData",value:function(){var e=c+"/contacts";return o.b(e).then(function(e){return e.data})}},{key:"getAnnounceDetail",value:function(e){var t=c+"/get/"+e;return o.b(t).then(function(e){return e.data})}},{key:"getUploadCategoryImgUrl",value:function(){return i.a.apiHost+"/common/upload/file"}},{key:"announceSend",value:function(t){var a=t.title,n=t.content,i=t.images,r=t.sendtime,l=t.range,s={title:a,content:n,images:i,sendtime:r,range:l},u=c+"/send";return o.a(u,s).then(function(t){return 0==t.code?(xmview.showTip("success",t.message),t.data):(xmview.showTip("error",t.message),e.reject(t))})}},{key:"confirm",value:function(t){var a=c+"/"+t+"/confirm";return o.d(a,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"deny",value:function(t){var a=c+"/"+t+"/deny";return o.d(a,{}).then(function(t){if(t.code)return e.reject(t)})}},{key:"cancel",value:function(t){var a=c+"/"+t+"/cancel";return o.d(a,{}).then(function(t){if(t.code)return e.reject(t)})}}]),t}();t.a=new l}).call(t,a(7))},699:function(e,t,a){"use strict";function n(){return{title:void 0,content:void 0,images:void 0,sendtime:"",range:""}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(385),i=(a(43),a(357)),r=a.n(i),c=a(42);t.default={data:function(){return{activeTab:"add",uploadImgUrl:"",nodeSelected:void 0,nodeParentSelected:void 0,moveToNode:void 0,treeData:[],dialogConfirm:{isShow:!1,msg:"",confirmClick:{}},dialogTree:{isShow:!1,confirmClick:{}},fetchParam:n(),rules:{title:[{required:!0,message:"请输入公告标题",trigger:"blur"}],content:[{required:!0,message:"请输入公告内容",trigger:"blur"}],images:[]},checkedMenus:[],checkAll:!1,allCheckData:[]}},watch:{activeTab:function(e){"add"!==e&&"root"!==e||this.resetForm()}},activated:function(){this.fetchParam=n(),this.checkAll=this.checkedMenus=0,xmview.setContentLoading(!1),this.uploadImgUrl=o.a.getUploadCategoryImgUrl(),this.$refs.uploadImg.clearFiles(),this.fetchData()},methods:{handleCheckAllChange:function(e){var t=this.allCheckData.map(function(e){return e.id});this.checkedMenus=e.target.checked?t:[]},handleCheckedMenusChange:function(e){var t=e.length;this.checkAll=t===this.allCheckData.length},fetchData:function(e){var t=this;return o.a.fetchAllCheckData(this.fetchParam).then(function(e){t.allCheckData=e,t.loadingData=!1,t.checkAll=t.checkedMenus.length===t.allCheckData.length,xmview.setContentLoading(!1)})},handleImgUploaded:function(e,t,a){},clearSelected:function(){this.selectable=!1},submitForm:function(){var e=this;this.fetchParam.images=this.$refs.uploadImg.imgList.map(function(e){return e.response.data.url}).join(),this.$refs.form.validate(function(t){t&&(e.fetchParam.sendtime=e.fetchParam.sendtime?a.i(c.b)(e.fetchParam.sendtime):"",e.fetchParam.range=e.checkedMenus.join(","),o.a.announceSend(e.fetchParam).then(function(t){xmview.showTip("success","操作成功!"),e.$refs.form.resetFields(),e.$router.push({name:"announce-lists"}),e.fetchParam=n()}))})},resetForm:function(){this.$refs.form.resetFields()}},components:{UploadImg:r.a}}},771:function(e,t,a){t=e.exports=a(139)(!0),t.push([e.i,'#course-manage-coursecategory{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff}#course-manage-coursecategory:after{content:"";clear:both;display:block}#course-manage-coursecategory .pagin{float:right;margin-top:15px}#course-manage-coursecategory .bottom-manage{margin-top:15px}#course-manage-coursecategory .manage-container{position:absolute;right:0;top:-50px}#course-manage-coursecategory .header-button.manage-container>.el-button i{margin-right:5px}#course-manage-coursecategory .header-button.manage-container>.el-button i:before{position:relative;top:-1px}.text-blue{color:#20a0ff}.text-light-blue{color:#58b7ff}.text-dark-blue{color:#1d8ce0}.text-success{color:#13ce66}.text-warning{color:#f7ba2a}.text-danger{color:#ff4949}#course-manage-coursecategory>section{display:inline-block;vertical-align:top}#course-manage-coursecategory .left-container{min-width:300px;border-right:1px solid #ededed}#course-manage-coursecategory .right-container{margin-left:15px;width:700px}#course-manage-coursecategory .right-container .edit-content{margin:10px 0 0}#course-manage-coursecategory .right-container .btn-selected{background:#20a0ff;color:#fff}',"",{version:3,sources:["/home/zhaoyicheng/devspace/gov_ui/assets/src/views/announce/announceSend.vue"],names:[],mappings:"AACA,8BAA8B,aAAa,kBAAkB,yBAAyB,kBAAkB,eAAe,CACtH,AACD,oCAAoC,WAAW,WAAW,aAAa,CACtE,AACD,qCAAqC,YAAY,eAAe,CAC/D,AACD,6CAA6C,eAAe,CAC3D,AACD,gDAAgD,kBAAkB,QAAQ,SAAS,CAClF,AACD,2EAA2E,gBAAgB,CAC1F,AACD,kFAAkF,kBAAkB,QAAQ,CAC3G,AACD,WAAW,aAAa,CACvB,AACD,iBAAiB,aAAa,CAC7B,AACD,gBAAgB,aAAa,CAC5B,AACD,cAAc,aAAa,CAC1B,AACD,cAAc,aAAa,CAC1B,AACD,aAAa,aAAa,CACzB,AACD,sCAAsC,qBAAqB,kBAAkB,CAC5E,AACD,8CAA8C,gBAAgB,8BAA8B,CAC3F,AACD,+CAA+C,iBAAiB,WAAW,CAC1E,AACD,6DAA6D,eAAe,CAC3E,AACD,6DAA6D,mBAAmB,UAAU,CACzF",file:"announceSend.vue",sourcesContent:["\n#course-manage-coursecategory{padding:15px;position:relative;border:1px solid #ededed;border-radius:5px;background:#fff\n}\n#course-manage-coursecategory:after{content:'';clear:both;display:block\n}\n#course-manage-coursecategory .pagin{float:right;margin-top:15px\n}\n#course-manage-coursecategory .bottom-manage{margin-top:15px\n}\n#course-manage-coursecategory .manage-container{position:absolute;right:0;top:-50px\n}\n#course-manage-coursecategory .header-button.manage-container>.el-button i{margin-right:5px\n}\n#course-manage-coursecategory .header-button.manage-container>.el-button i:before{position:relative;top:-1px\n}\n.text-blue{color:#20A0FF\n}\n.text-light-blue{color:#58B7FF\n}\n.text-dark-blue{color:#1D8CE0\n}\n.text-success{color:#13CE66\n}\n.text-warning{color:#F7BA2A\n}\n.text-danger{color:#FF4949\n}\n#course-manage-coursecategory>section{display:inline-block;vertical-align:top\n}\n#course-manage-coursecategory .left-container{min-width:300px;border-right:1px solid #ededed\n}\n#course-manage-coursecategory .right-container{margin-left:15px;width:700px\n}\n#course-manage-coursecategory .right-container .edit-content{margin:10px 0 0\n}\n#course-manage-coursecategory .right-container .btn-selected{background:#20A0FF;color:#fff\n}\n"],sourceRoot:""}])},805:function(e,t,a){var n=a(771);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(140)("12b6e34a",n,!0)},859:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{attrs:{id:"course-manage-coursecategory"}},[a("section",{staticClass:"right-container"},[a("el-card",{staticClass:"edit-content"},[a("el-form",{ref:"form",attrs:{"label-position":"right","label-width":"90px",rules:e.rules,model:e.fetchParam}},[a("el-form-item",{attrs:{label:"公告标题",prop:"title"}},[a("el-input",{model:{value:e.fetchParam.title,callback:function(t){e.fetchParam.title=t},expression:"fetchParam.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[a("el-input",{model:{value:e.fetchParam.content,callback:function(t){e.fetchParam.content=t},expression:"fetchParam.content"}})],1),e._v(" "),a("el-form-item",{staticClass:"images",attrs:{label:"公告图片",prop:"images"}},[a("UploadImg",{ref:"uploadImg",attrs:{fetchParam:e.fetchParam.images,url:e.uploadImgUrl,onSuccess:e.handleImgUploaded}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"sendtime",label:"发送时间"}},[a("el-date-picker",{attrs:{type:"date"},model:{value:e.fetchParam.sendtime,callback:function(t){e.fetchParam.sendtime=t},expression:"fetchParam.sendtime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发送范围"}},[a("el-checkbox",{on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedMenusChange},model:{value:e.checkedMenus,callback:function(t){e.checkedMenus=t},expression:"checkedMenus"}},e._l(e.allCheckData,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.id,value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"info"},on:{click:e.submitForm}},[e._v("保存\n                        ")])],1)],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"操作提示",size:"tiny"},model:{value:e.dialogConfirm.isShow,callback:function(t){e.dialogConfirm.isShow=t},expression:"dialogConfirm.isShow"}},[a("span",{domProps:{innerHTML:e._s(e.dialogConfirm.msg)}}),e._v(" "),a("span",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogConfirm.isShow=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialogConfirm.confirmClick}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]}}});
//# sourceMappingURL=21.21d0ee0d4389fc4fb762.js.map